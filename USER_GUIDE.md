# 動画配信システム ユーザーガイド

## 🚀 クイックスタート

### 1. 初回セットアップ
```batch
# 完全セットアップ（推奨）
complete_setup.bat

# または個別にセットアップ
install.bat           # バックエンド
frontend_install.bat  # フロントエンド
```

### 2. システム起動
```batch
# 統合起動（推奨）
start_all.bat

# または個別に起動
runserver.bat        # バックエンド
cd frontend && npm run dev  # フロントエンド
```

### 3. アクセス
- **アプリケーション**: http://localhost:3000
- **管理画面**: http://localhost:8000/admin
- **API**: http://localhost:8000/api

## 📁 動画ファイルの追加

1. `media/videos/` フォルダに動画ファイルを配置
2. システムが自動的にスキャン（起動時・6時間ごと）
3. または手動スキャン：ヘッダーの更新ボタンをクリック

### 対応フォーマット
- MP4, AVI, MKV, MOV, WMV, FLV, WebM, M4V, MPG, MPEG

## 🎮 基本操作

### ナビゲーション

#### ページ切り替え
- **全ファイル**: すべての有効な動画
- **フォルダに存在しない**: 未分類の動画
- **フォルダ**: フォルダ管理
- **削除ファイル**: 削除フラグ付きファイル
- **重複ファイル**: 重複検出されたファイル

#### キーボードショートカット
- `Ctrl + 1-5`: 各ページへ移動
- `Ctrl + F`: 検索
- `Ctrl + Shift + V`: 表示モード切替
- `Ctrl + M`: 複数選択モード切替

### ファイル操作

#### シングルクリック
- **サムネイルモード**: 動画を再生
- **複数選択モード**: ファイルを選択

#### 右クリック/長押しメニュー
- フォルダへ移動
- フォルダへコピー
- タグを追加
- ファイルを削除（削除フラグ）
- ファイルを復元（削除ページ）

#### 複数選択操作
1. 複数選択ボタンをON
2. ファイルをクリックで選択
3. 画面下部のバーで一括操作

## 🎬 動画プレイヤー

### 基本コントロール
- **スペース**: 再生/一時停止
- **F**: フルスクリーン
- **M**: ミュート
- **L**: ループ再生
- **←/→**: 巻き戻し/スキップ
- **↑/↓**: 音量調整

### タッチ操作（モバイル/タブレット）
- **シングルタップ（中央）**: 再生/一時停止
- **ダブルタップ（左）**: 5秒巻き戻し
- **ダブルタップ（右）**: 5秒スキップ
- **長押し**: 2倍速再生
- **フリック**: シーク
- **ピンチ**: ズーム

### A-Bループ
1. プレイヤーのループボタンをクリック
2. 開始地点で「開始地点を設定」
3. 終了地点で「終了地点を設定」
4. 自動的にループ再生

### 再生速度
- 0.1倍速〜5倍速まで調整可能
- プリセット: 0.25, 0.5, 0.75, 1, 1.25, 1.5, 2倍速

## 📂 フォルダ管理

### フォルダの作成
1. フォルダページへ移動
2. 右下の「+」ボタンをクリック
3. フォルダ名を入力

### フォルダ階層
- 親フォルダ内に子フォルダを作成可能
- パンくずリストで階層を確認
- クリックで上位フォルダへ移動

### ファイルの整理
1. **移動**: ファイルを別フォルダへ完全移動
2. **コピー**: ファイルを複数フォルダで参照
3. **削除**: フォルダからの参照を削除（ファイル自体は残る）

## 🎯 複数動画の同時再生

### 開き方
1. 動画プレイヤーの「+」ボタンをクリック
2. 追加する動画を選択
3. 「選択動画をすべて開く」をクリック

### レイアウトモード

#### 自由配置モード
- ドラッグで移動
- リサイズハンドルでサイズ変更
- 個別にフルスクリーン可能

#### グリッド配置モード
- 自動的に均等配置
- 動画数に応じて最適化

## 🔍 検索とフィルタ

### 検索方法
- **ファイル名検索**: 部分一致で検索
- **タグ検索**: `tag:タグ名` で検索
- **複合検索**: スペース区切りでAND検索

### ソート
詳細表示で列ヘッダーをクリック：
- ファイル名
- ファイルサイズ
- 動画時間
- 作成日時

## ⚙️ 設定

### 表示設定
- **サムネイルサイズ**: 小/中/大
- **ファイル情報表示**: ON/OFF
- **アニメーションGIF**: ON/OFF
- **グリッド列数**: 自動/2-6列

### プレイヤー設定
- **デフォルト再生速度**: 0.25-5倍速
- **デフォルト音量**: 0-100%
- **スキップ秒数**: 5-30秒
- **長押し倍速**: 1.5-5倍速
- **自動再生**: ON/OFF
- **ループ再生**: ON/OFF

## 🛠️ トラブルシューティング

### 動画が表示されない
1. `media/videos/` に動画ファイルがあるか確認
2. 手動スキャン実行（更新ボタン）
3. サポートされているフォーマットか確認

### サムネイルが表示されない
- FFmpegが正しくインストールされているか確認
- `media/gifs/` フォルダの書き込み権限を確認

### 再生できない
- ブラウザが動画フォーマットをサポートしているか確認
- 動画ファイルが破損していないか確認
- コンソールでエラーを確認（F12）

### システムが重い
- 同時に開いている動画数を減らす
- サムネイルサイズを小さくする
- アニメーションGIFを無効化

## 📱 デバイス対応

### PC (Windows/Mac/Linux)
- すべての機能が利用可能
- キーボードショートカット対応
- マウス操作最適化

### タブレット (iPad/Android)
- タッチ操作対応
- ピンチズーム対応
- 横画面推奨

### スマートフォン
- 基本機能のみ
- シングル動画再生推奨
- 縦画面対応

## 🔒 セキュリティ注意

このシステムは**自宅内での使用**を想定しています。
外部公開する場合は必ず：
1. 認証機能を追加
2. HTTPSを設定
3. ファイアウォール設定
4. Django設定を本番用に変更

## 💡 Tips & Tricks

### パフォーマンス向上
- 定期的に重複ファイルを整理
- 不要な削除ファイルを完全削除
- データベースの最適化

### 便利な使い方
- よく見る動画は「お気に入り」フォルダへ
- タグで細かく分類
- A-Bループで特定シーンを繰り返し
- 複数動画で比較視聴

### バックアップ
定期的にバックアップ：
- `media/` フォルダ
- データベース（MySQL）
- 設定ファイル

## 📞 サポート

問題が発生した場合：
1. `test_system.bat` で診断
2. `logs/django.log` を確認
3. ブラウザコンソール（F12）を確認
4. このガイドのトラブルシューティングを参照

---

© 2024 Video Streaming System - Personal Use Only